{% extends "master.html" %}

{% block title %}Uploaded Trees - PhyloFile{% endblock %}

{% block leftmenu %}
{% include "tree_menu.html" %}
{% endblock %}

{% block content %}

{% if files %}
    <table>
        <thead>
            <td>Tree ID</td>
            <td>Date/time</td>
            <td>Uploaded by</td>
            <td>Format</td>                
            <td>File</td>
            <td>Size</td>
            <td>Action</td>
        </thead>
    {% for file in files %}
        <form action='/trees/uploads/approve/{{ file.id }}/' method='POST'>
        {% csrf_token %}
        <tr>
            <td>
                <input name='tree_id' value='{{ file.tree_id }}' />
            </td>
            <td>
                {{ file.upload_time }}
            </td>
            <td>
                {{ file.uploaded_by.username }}
                {% if request.user.username == document.uploaded_by.username %}
                <i>(me)</i>
                {% endif %}
            </td>
            <td>
                {{ file.format }}
            </td>
            <td>
                {{ file.tree_file_name }}
                (<a href='/trees/uploads/view/{{ file.id }}/'>view</a>)
                {% if request.user.username == file.uploaded_by.username or deleter %}
                (<a href='/trees/uploads/delete/{{ file.id }}/'>delete</a>)
                {% endif %}
            </td>
            <td>
                {{ file.tree_file_size }}
            </td>
            <td>
                <input type='submit' name='action' value='Approve' /></br>
                <input type='submit' name='action' value='Reject' /></br>
            </td>
        </tr>
    {% endfor %}
    </table>
    
{% else %}

    <p><i>(No uploaded trees.)</i></p>
    
{% endif %}

{% endblock%}
